-- Variáveis de Configuração
local player = game.Players.LocalPlayer
local titansFolder = game.Workspace:WaitForChild("Titans")
local damageAmount = 100
local securityLevel = 150  -- Segurança aumentada para 150%
local attackRange = 30  -- Distância para o ataque (em studs)
local autoAttackEnabled = false  -- Ativar ataque automático quando o Titã estiver perto
local titanGrabbed = false  -- Flag para verificar se o Titã está tentando pegar o jogador
local menuVisible = false  -- Controla a visibilidade do menu

-- Função para verificar se o jogador está perto de um Titã
local function isTitanNear()
    local closestTitan = nil
        local minDistance = attackRange
            for _, titan in ipairs(titansFolder:GetChildren()) do
                    local humanoid = titan:FindFirstChild("Humanoid")
                            if humanoid and titan:FindFirstChild("Head") then
                                        local distance = (titan.Head.Position - player.Character.HumanoidRootPart.Position).magnitude
                                                    if distance < minDistance then
                                                                    closestTitan = titan
                                                                                    minDistance = distance
                                                                                                end
                                                                                                        end
                                                                                                            end
                                                                                                                return closestTitan
                                                                                                                end

                                                                                                                -- Função para atacar um Titã
                                                                                                                local function attackTitan(titan)
                                                                                                                    local humanoid = titan:FindFirstChild("Humanoid")
                                                                                                                        if humanoid then
                                                                                                                                humanoid:TakeDamage(damageAmount)
                                                                                                                                        print("Titã atacado com sucesso!")
                                                                                                                                            end
                                                                                                                                            end

                                                                                                                                            -- Função de defesa contra o Titã
                                                                                                                                            local function defendAgainstTitan()
                                                                                                                                                -- Detecta se o Titã está tentando pegar o jogador
                                                                                                                                                    for _, titan in ipairs(titansFolder:GetChildren()) do
                                                                                                                                                            local humanoid = titan:FindFirstChild("Humanoid")
                                                                                                                                                                    if humanoid then
                                                                                                                                                                                -- Verifica a posição das mãos do Titã
                                                                                                                                                                                            local leftHand = titan:FindFirstChild("LeftHand")
                                                                                                                                                                                                        local rightHand = titan:FindFirstChild("RightHand")
                                                                                                                                                                                                                    if leftHand and rightHand then
                                                                                                                                                                                                                                    -- Verifica a proximidade com as mãos do Titã para bloquear o ataque
                                                                                                                                                                                                                                                    local leftHandDist = (leftHand.Position - player.Character.HumanoidRootPart.Position).magnitude
                                                                                                                                                                                                                                                                    local rightHandDist = (rightHand.Position - player.Character.HumanoidRootPart.Position).magnitude
                                                                                                                                                                                                                                                                                    if leftHandDist < 5 or rightHandDist < 5 then
                                                                                                                                                                                                                                                                                                        -- Se o Titã tentar pegar, evita o contato com a mão
                                                                                                                                                                                                                                                                                                                            local escapeVector = (player.Character.HumanoidRootPart.Position - titan.HumanoidRootPart.Position).unit * 10
                                                                                                                                                                                                                                                                                                                                                player.Character.HumanoidRootPart.CFrame = CFrame.new(player.Character.HumanoidRootPart.Position + escapeVector)
                                                                                                                                                                                                                                                                                                                                                                    titanGrabbed = true
                                                                                                                                                                                                                                                                                                                                                                                        print("Defesa ativa! Evitando ser pego pelo Titã.")
                                                                                                                                                                                                                                                                                                                                                                                                            break
                                                                                                                                                                                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                                                                                                                                                                                                                titanGrabbed = false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        -- Função de ataque automático
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        local function autoAttack()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            local titan = isTitanNear()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if titan then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        -- Mover até a nuca do Titã e atacar
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                local neckPosition = titan.Head.Position + Vector3.new(0, 5, 0)  -- Supondo que a nuca esteja acima da cabeça
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        player.Character.HumanoidRootPart.CFrame = CFrame.new(neckPosition)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                attackTitan(titan)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                -- Após matar o Titã, ir para o próximo Titã
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        wait(1)  -- Aguarda 1 segundo entre os ataques
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                autoAttack()  -- Chama a função de ataque novamente para atacar o próximo Titã
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    -- Função para proteger contra administradores e moderadores
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    local function isAdminDetected()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        local adminList = {"Admin", "Moderator", "Developer"}  -- Lista de grupos de admin
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            for _, adminName in ipairs(adminList) do
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if player:GetRankInGroup(adminName) > 0 then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                -- Função de segurança alta
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                local function checkSecurity()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    -- Verifica se há administradores ou moderadores
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if isAdminDetected() then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                warn("Administrador detectado! Desconectando...")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        game:Shutdown()  -- Desconecta automaticamente para segurança
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            -- Verifica se o script está sendo executado de forma segura
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                local scriptSafetyCheck = true  -- Aqui podemos incluir mais verificações de segurança
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if scriptSafetyCheck then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            return false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        return true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        -- Menu invisível
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        local function createMenu()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            local screenGui = Instance.new("ScreenGui")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                screenGui.Name = "InvisibleMenu"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    screenGui.Parent = player.PlayerGui
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        screenGui.ResetOnSpawn = false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                local frame = Instance.new("Frame")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    frame.Size = UDim2.new(0, 1, 0, 1)  -- Tamanho minúsculo (invisível)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        frame.BackgroundTransparency = 1  -- Invisível
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            frame.Parent = screenGui
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    -- Botão para ativar/desativar o auto-ataque
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        local button = Instance.new("TextButton")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            button.Size = UDim2.new(0, 200, 0, 50)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                button.Position = UDim2.new(0.5, -100, 0.9, 0)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    button.Text = "Ativar Auto-Ataque"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        button.Parent = frame
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                button.MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        autoAttackEnabled = not autoAttackEnabled
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                button.Text = autoAttackEnabled and "Desativar Auto-Ataque" or "Ativar Auto-Ataque"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            -- Botão para fechar o menu
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                local closeButton = Instance.new("TextButton")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    closeButton.Size = UDim2.new(0, 100, 0, 50)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        closeButton.Position = UDim2.new(0.5, -50, 0.8, 0)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            closeButton.Text = "Fechar Menu"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                closeButton.Parent = frame
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        closeButton.MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                menuVisible = false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        screenGui:Destroy()  -- Fecha o menu
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    -- Botão para abrir o menu
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        local openButton = Instance.new("TextButton")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            openButton.Size = UDim2.new(0, 100, 0, 50)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                openButton.Position = UDim2.new(0.5, -50, 0.8, 0)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    openButton.Text = "Abrir Menu"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        openButton.Parent = player.PlayerGui
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                openButton.MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if not menuVisible then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    createMenu()  -- Cria o menu invisível
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                menuVisible = true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            openButton.Visible = false  -- Esconde o botão de abrir menu
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        -- Função principal de execução
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        local function executeScript()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            -- Verificação de segurança
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if checkSecurity() then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        return
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    -- Criação do botão para abrir o menu
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        createMenu()

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            -- Loop de ataque automático
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                while true do
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if autoAttackEnabled and not titanGrabbed then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    autoAttack()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    defendAgainstTitan()  -- Verifica e ativa a defesa contra os Titãs
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            wait(1)  -- Aguarda 1 segundo entre as tentativas de ataque e defesa
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                -- Executa o script
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                executeScript()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                